!function(){"use strict";function e(e,t,n,i){return new(n||(n=Promise))((function(o,a){function c(e){try{r(i.next(e))}catch(e){a(e)}}function g(e){try{r(i.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,g)}r((i=i.apply(e,t||[])).next())}))}figma.on("run",(({parameters:t})=>e(void 0,void 0,void 0,(function*(){yield figma.clientStorage.getAsync("user"),t.prompt.length>0&&(console.log("prompt entered - ",t.prompt),figma.closePlugin(t.prompt))})))),figma.on("selectionchange",(()=>{console.log("selection changed"),1===figma.currentPage.selection.length?figma.ui.postMessage({name:figma.currentPage.selection[0].name,data:{id:figma.currentPage.selection[0].id,type:figma.currentPage.selection[0].type}}):figma.currentPage.selection.length>1?figma.ui.postMessage({name:"Select one item only",data:void 0}):figma.ui.postMessage({name:"Nothing is selected",data:void 0})})),function(){e(this,void 0,void 0,(function*(){figma.showUI(__html__,{width:320,height:480}),figma.ui.onmessage=e=>{switch(e.type){case"form-submitted":!function(e){if(console.log("form submitted",e),figma.currentPage.selection.length>0){const t=figma.currentPage.selection[0];console.log("1 current selection ",t.name);let n=figma.createFrame();figma.createVector(),figma.viewport.center;let i=e.prompt;n.fills=[{type:"SOLID",color:{r:1,g:1,b:1}}],n.name=i}}(e.data);break;case"login":!function(){figma.clientStorage.getAsync("token")||figma.ui.postMessage({type:"userNotAuthenticated"});figma.ui.postMessage({type:"userAuthenticated",origin:origin})}();break;case"prompt":console.log("prompt entered - ",e.data)}}}))}()}();
